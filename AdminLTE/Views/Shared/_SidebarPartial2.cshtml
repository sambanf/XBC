
@using Mazars.Web.Security
@using Mazars.ViewModel
@using Mazars.Repository
<aside class="main-sidebar">
    <section class="sidebar">
        <div class="user-panel">
            <div class="pull-left image">
                <img src="~/AdminLTE/dist/img/user.svg" class="img-circle" alt="User Image">
            </div>
            <div class="pull-left info">
                <p>@SessionPersister.FullName</p>
                <a href="#"><i class="fa fa-circle text-success"></i> Online</a>
            </div>
        </div>
        <ul class="sidebar-menu">
            <li class="header"><strong>MAIN NAVIGATION</strong></li>
            <li id="left-sidebar-menu-dashboard">
                <a href="@Url.Action("", "Home")">
                    <i class="fa fa-dashboard"></i><span>Home</span>
                </a>
            </li>
            @{
                if (SessionPersister.Username == "admin")
                {
                    <li id="left-sidebar-menu-default-setting">
                        <a href="@Url.Action("", "DefaultSetting")">
                            <i class="fa fa-columns"></i><span>Default Setting</span>
                        </a>
                    </li>
                    <li id="left-sidebar-menu-cost-code-mapping">
                        <a href="@Url.Action("", "CostCode")">
                            <i class="fa fa-pie-chart"></i><span>Cost Code Mapping</span>
                        </a>
                    </li>
                    <li id="left-sidebar-menu-department-mapping">
                        <a href="@Url.Action("", "DepartmentMapping")">
                            <i class="fa fa-laptop"></i><span>Department Mapping</span>
                        </a>
                    </li>
                    <li id="left-sidebar-menu-employee-grade-mapping">
                        <a href="@Url.Action("", "EmployeeGradeMapping")">
                            <i class="fa fa-edit"></i><span>Employee Grade Mapping</span>
                        </a>
                    </li>
                    <li id="left-sidebar-menu--employee-group-mapping">
                        <a href="@Url.Action("", "EmployeeGroupMapping")">
                            <i class="fa fa-table"></i><span>Employee Group Mapping</span>
                        </a>
                    </li>
                    <li id="left-sidebar-menu-employee-status-mapping">
                        <a href="@Url.Action("", "EmployeeStatusMapping")">
                            <i class="fa fa-calendar"></i><span>Employee Status Mapping</span>
                        </a>
                    </li>
                    <li id="left-sidebar-menu-fix-transaction-mapping">
                        <a href="@Url.Action("", "FixTransactionMapping")">
                            <i class="fa fa-envelope"></i><span>Fix Transaction Mapping</span>
                        </a>
                    </li>
                    <li id="left-sidebar-menu-non-fix-transaction-mapping">
                        <a href="@Url.Action("", "NonFixTransactionMapping")">
                            <i class="fa fa-folder"></i><span>Non Fix Transaction Mapping</span>
                        </a>
                    </li>
                    <li id="left-sidebar-menu-transaction-code">
                        <a href="@Url.Action("", "TransactionCode")">
                            <i class="fa fa-share"></i><span>Transaction Code</span>
                        </a>
                    </li>
                }
                else
                {
                    if (Request.IsAuthenticated) { 
                        List<PrivilegeFormsViewModel> forms = AccountRepo.GetPrivilegeFormsByUserId(Convert.ToInt16(SessionPersister.UserId));
                        foreach (var form in forms)
                        {
                            <li id="left-sidebar-menu-transaction-code">
                                <a href="@Url.Action("", @form.Controller)">
                                    <i class="fa fa-share"></i><span>@form.Menu</span>
                                </a>
                            </li>
                        }
                    }
                }
                if (Request.IsAuthenticated)
                {
                    List<PrivilegeFormsViewModel> forms = AccountRepo.GetPrivilegeFormsByUserId(Convert.ToInt16(SessionPersister.UserId));
                    if (SessionPersister.Username == "admin" || forms.Exists(x => x.Controller == "TransactionCode"))
                    {
                        <li id="left-sidebar-menu-transaction-code">
                            <a href="@Url.Action("", "TransactionCode")">
                                <i class="fa fa-share"></i><span>Transaction Code</span>
                            </a>
                        </li>
                    }
                }
            }
        </ul>
    </section>
</aside>
